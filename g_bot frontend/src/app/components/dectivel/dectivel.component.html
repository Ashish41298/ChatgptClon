<section class="main-dat-section">
  <div class="snackbar animate__animated animate__bounceInRight" *ngIf="errMessage">
    <span>{{errMessage}}</span>
  </div>
  <div class="maifolder">
    <div #container class="settingec" appHighliter (click)="penalsettings($event)">
      <div class="setcheding animate__animated animate__bounceInRight" >
        <i class="fa-solid fa-sliders animate__animated animate__bounceInLeft"></i>Customization
      </div>
    
      <mat-accordion #item1 id="item1"  class="example-headers-align" multi style="margin-bottom: 10px !important;" (click)="matselectitems(item1,'item1')" *ngIf="panel1Active == true">
        <mat-expansion-panel class="animate__animated animate__flipInX ">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <i style="margin-right: 7px; color: dodgerblue;" class="fa-solid fa-paint-roller"></i>  Theme:
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="Mcontrols" (click)="stpprop($event)">
            <label  class="labels"></label>
            <select style="max-width: 280px;" class="form-select" [(ngModel)]="selectedTheme" (change)="onThemeChange()">
              <option value="default">atom-one-dark</option> 
              <option *ngFor="let theme of themes" [ngValue]="theme" >{{ theme.name ?? 'default' }}</option>
            </select>
          </div>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion #item2 id="item2" class="example-headers-align" multi style="margin-bottom: 10px !important;" (click)="matselectitems(item2,'item2')" *ngIf="panel2Active == true">
        <mat-expansion-panel class="animate__animated animate__flipInX ">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <i style="margin-right: 7px; color: #479da2;" class="fa-solid fa-earth-europe"></i> Language:
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="Mcontrols" (click)="stpprop($event)">
            <label  class="labels"></label>
            <select style="max-width: 280px;" class="form-select" [(ngModel)]="selectedLanguages" (change)="Onlanguageselect()">
              <option disabled [value]="selectedLanguages" >Languages</option> 
              <option *ngFor="let lang of Languagesslct" [ngValue]="lang" >{{ lang.slctLang ?? 'default' }}</option>
            </select>
           
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <div *ngIf="chklornot == false && Allpnls == false" style="margin: 10px; color: crimson; font-size: smaller;" class="animate__animated animate__flipInX">
        If Enabled This Code sec Then slct Language
        <!-- Enabled then slct language -->
       </div>
        <mat-accordion #item3 id="item3" class="example-headers-align" multi style="margin-bottom: 10px !important;" (click)="matselectitems(item3,'item3')" *ngIf="panel3Active == true">
          <mat-expansion-panel class="mexpenal animate__animated animate__flipInX " [disabled]="chklornot == false">
            <mat-expansion-panel-header class="mtheader" >
              <mat-panel-title >
                <i style="margin-right: 7px; color: crimson;" class="fa-solid fa-code"></i>  Enter Code:
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="Mcontrols Mconchange" (click)="stpprop($event)">
              <textarea [disabled]="chklornot == false" class="form-control teatareaset" name="code" id="t1" cols="30" rows="10" [(ngModel)]="codepasted" ></textarea>
               <button [disabled]="chklornot == false" mat-raised-button color="primary" (click)="showcheckes()">check</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
    
        <mat-accordion #item4 id="item4" class="example-headers-align" multi style="margin-bottom: 10px !important;" (click)="matselectitems(item4,'item4')" *ngIf="panel4Active == true">
          <mat-expansion-panel class="animate__animated animate__flipInX ">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <i style="margin-right: 7px; color: blueviolet;" class="fa-solid fa-display"></i> Header-Setting:
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="colorselecter">
              <div class="Mcontrols" (click)="stpprop($event)">
                <label  class="labels">Change Main-Backgroud:</label>
                <input class="colorinpt" #mainchangechange type="color" name="headcolor" id="mainchangechange" 
                [(ngModel)]="Mainbg" (change)="colochangers('Main-background')">
                <button title="transperent" class="colorinpt" type="color" style="border-radius: 5px;" (click)="colochangers('transparent')"></button>
              </div>
              <div class="Mcontrols" (click)="stpprop($event)">
                <label  class="labels">Change Backgroud:</label>
                <input class="colorinpt" #hbgchange type="color" name="headcolor" id="headcolor" 
                [(ngModel)]="innerHeadcolor" (change)="colochangers('background')">
              </div>
              <div class="Mcontrols" (click)="stpprop($event)">
                <label  class="labels">Change Icons/Text Color:</label>
                <input class="colorinpt" #hbgchangefotext type="color" name="hhheadcolor" id="sheadcolor" 
                [(ngModel)]="innertextHcolor" (change)="colochangers('color')">
              </div>
            </div>
            <div class="colorselecter">
              <span>Code Tag Background</span>
              <div class="Mcontrols" (click)="stpprop($event)">
                <label  class="labels">Change Backgroud:</label>
                <input class="colorinpt" #hbgchange type="color" name="codebg" id="codebg" 
                [(ngModel)]="innercodebgcolor" (change)="colochangers('code-background')">
              </div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      
        <mat-accordion #item5 id="item5" class="example-headers-align" multi style="margin-bottom: 10px !important;" (click)="matselectitems(item5,'item5')" *ngIf="panel5Active == true">
          <mat-expansion-panel class="animate__animated animate__flipInX">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <i style="margin-right: 7px; color: dimgray;" class="fa-solid fa-laptop-code"></i> Code-Tag-Setting:
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="colorselecter">
              <span>Code-Setting</span><br>
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <div class="Mcontrols" (click)="stpprop($event)">
                  <label  class="labels">Height:</label>
                  <input type="number" [(ngModel)]="codeheight" (ngModelChange)="setpp()" placeholder="auto" name="height" id="height" (mouseout)="setpp()">
                </div>
                <div class="Mcontrols" (click)="stpprop($event)">
                  <label class="labels">Width:</label>
                  <input type="number" [(ngModel)]="codewidth" (ngModelChange)="setpp()" placeholder="auto" name="Width" id="Width" >
                </div>
              </div>
    
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <div class="Mcontrols" (click)="stpprop($event)">
                  <label class="labels">Font-Size:</label>
                  <input type="number" style="width: 66px !important;" [(ngModel)]="codefontsize" placeholder="Default" name="font-size" id="font-size" (change)="checkmxvalue()">
                </div>
                <div class="Mcontrols" (click)="stpprop($event)">
                  <label class="labels">Line-Height:</label>
                  <input type="number" style="width: 66px !important;" [(ngModel)]="codelineheight" placeholder="Default" name="fffont-size" id="fffont-size" (change)="checkmxvalue()">
                </div>
              </div>
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <div class="Mcontrols" (click)="stpprop($event)">
                  <label class="labels">Font-Family:</label>
                  <select style="max-width: 150px;" class="form-select" [(ngModel)]="slctfontfamily" (change)="onchangeff()">
                    <option [value]="slctfontfamily">Default</option> 
                    <option *ngFor="let ffamily of ffamilys; index as i" [ngValue]="ffamily">{{ ffamily.name ?? 'default' }}</option>
                  </select>
                </div>
              </div>
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <div class="Mcontrols" (click)="stpprop($event)">
                  <label class="labels">Code-Alignment:</label>
                  <button class="alignmentbtn" mat-mini-fab color="primary" (click)="alignmentsetter('Default')"><i class="fa-solid fa-d fa-flip" style="color: #ededed;"></i></button>
                  <button class="alignmentbtn" mat-mini-fab color="primary" (click)="alignmentsetter('left')"><i class="fa-solid fa-align-left fa-beat-fade"></i></button>
                  <button class="alignmentbtn" mat-mini-fab color="primary" (click)="alignmentsetter('center')"><i class="fa-solid fa-align-center fa-beat-fade"></i></button>
                  <button class="alignmentbtn" mat-mini-fab color="primary" (click)="alignmentsetter('right')"><i class="fa-solid fa-align-right fa-beat-fade"></i></button>
                </div>
              </div>
             
            </div>
          </mat-expansion-panel>
        </mat-accordion>

    </div>
    <span> </span>
    <div class="maincoshowers line-numbers"  #conimg [style.width]="chatowa" [style.background]="Mainbg" >
      <div  class="innerstylespre" [style.background]="innerHeadcolor" [style.width.px]="codewidth">
        <div class="spa">
          <i class="dots" [style.background]="innertextHcolor" ></i>
          <i class="dots" [style.background]="innertextHcolor" ></i>
          <i class="dots" [style.background]="innertextHcolor" ></i>
        </div>
        <div #editableDiv contenteditable="true" name="subject" minlength="3" maxlength="50" title="Title / Subject" [style.color]="innertextHcolor" class="mhtitle" style='font-family: "Zilla Slab", serif; color:white; letter-spacing: 1px;' (input)="mxlenght()" (click)="mxlenght()">
          {{Mlanguage}}
        </div>
        <!-- <input name="subject" minlength="3" maxlength="50" title="Title / Subject" [style.color]="innertextHcolor" class="mhtitle" [value]="Mlanguage" style='font-family: "Zilla Slab", serif; color:white; letter-spacing: 1px;'> -->
        <button class="iseditablebtn" mat-button (click)="isEditable()"><i class="fa-solid fa-pen-nib"></i></button>
      </div>
      <pre  spellcheck="false" class="coderpre" [attr.contenteditable]="isEnableds" [style.background]="innercodebgcolor" [style.height]="codeHch" [style.width.px]="codewidth" class="hljs atom-one-dark highlighted language-xml" [style.font-size.px]="codefontsize" [style.line-height]="codelineheight" [style.font-family]="slctfontfamily?.value" [ngStyle]="algnvalues ?? ''"
      (paste)="preventPaste($event)">
        </pre>
     
    </div>
    
  </div>
  <!-- <pre line-numbers contenteditable="true" class="coderpre" (change)="lineNumners()">
   <span>fdgdfgdfg</span>
   <span>fdgdfgdfg</span>
   <span>fdgdfgdfg</span>
   <span>fdgdfgdfg</span>
  </pre> -->

  <div class="showprev" >
    <div class="doro">
      <button title="Check Preview / Download" mat-raised-button color="primary" (click)="generateImage()"> <img *ngIf="ckploader == true" style="margin-right: 5px;" height="25px" src="../../../assets/ashish_loaders.gif" alt=""> check Preview</button>
    <button class="stQaF" mat-raised-button color="primary" title="Image format default is png" (click)="cngimgfmt()"> 
      <i *ngIf="closeiconf == true" class="fa-solid fa-square-xmark fa-shake"></i>
      <svg *ngIf="closeiconf == false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path d="M11.36 60h41.28A7.36 7.36 0 0 0 60 52.64V11.36A7.36 7.36 0 0 0 52.64 4H11.36A7.36 7.36 0 0 0 4 11.36v41.28A7.36 7.36 0 0 0 11.36 60zM18 12a6 6 0 1 1-6 6 6 6 0 0 1 6-6zM9.34 46.74l20.18-20.25a3.51 3.51 0 0 1 5 0l8.78 8.81a2.62 2.62 0 0 1 0 3.71l-4.71 4.71a2 2 0 0 0 .26 3.07 2.09 2.09 0 0 0 2.67-.3L48 40l6.31-6.3a1 1 0 0 1 1.72.71v16.83A4.67 4.67 0 0 1 51.37 56H14.16A6.16 6.16 0 0 1 8 50a5.16 5.16 0 0 1 1.34-3.26z" data-name="Layer 2"/></svg> </button>
    <button class="stQaF"  mat-raised-button color="primary" title="Image Quality default is medium" (click)="cngimgqlt()">
      <i *ngIf="closeicons == true" class="fa-solid fa-square-xmark fa-shake"></i>
    <svg *ngIf="closeicons == false"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs></defs><g id="Layer_2" data-name="Layer 2"><path class="cls-1" d="M54.41 4H9.59A5.59 5.59 0 0 0 4 9.59v44.82A5.59 5.59 0 0 0 9.59 60h44.82A5.59 5.59 0 0 0 60 54.41V9.59A5.59 5.59 0 0 0 54.41 4zM30 30v10.49A1.52 1.52 0 0 1 28.48 42h-1A1.52 1.52 0 0 1 26 40.49v-5A1.52 1.52 0 0 0 24.48 34h-5A1.52 1.52 0 0 0 18 35.52v5A1.52 1.52 0 0 1 16.48 42h-1A1.52 1.52 0 0 1 14 40.49v-17A1.52 1.52 0 0 1 15.52 22h1A1.52 1.52 0 0 1 18 23.51v5A1.52 1.52 0 0 0 19.52 30h5A1.52 1.52 0 0 0 26 28.48v-5A1.52 1.52 0 0 1 27.52 22h1A1.52 1.52 0 0 1 30 23.51zm20 5.3a6.71 6.71 0 0 1-6.71 6.7h-7.18A2.11 2.11 0 0 1 34 39.9V24.1a2.11 2.11 0 0 1 2.11-2.1h7.18A6.71 6.71 0 0 1 50 28.7z"/><path class="cls-1" d="M42.13 26h-2.67A1.46 1.46 0 0 0 38 27.46v9.08A1.46 1.46 0 0 0 39.46 38h2.67A3.88 3.88 0 0 0 46 34.12v-4.24A3.88 3.88 0 0 0 42.13 26z"/></g></svg> </button>
    </div>
       <!-- popchange -->
       <div class="Mingfqpp animate__animated animate__bounceIn" *ngIf="cngimgfmtpop == true" >
        <div class="chaneimgfmt" >
          <button class="imgsetbtm" mat-button (click)="gtimgFormat('png')">PNG</button>
          <button class="imgsetbtm" mat-button (click)="gtimgFormat('jpeg')">JPEG</button>
          <button class="imgsetbtm" mat-button (click)="gtimgFormat('webp')">WEBP</button>
          <button class="imgsetbtm" mat-button (click)="gtimgFormat('bmp')">BMP</button>
          <button class="imgsetbtm" mat-button (click)="gtimgFormat('gif')">GIF</button>
        </div>
      </div>
       <div class="Mingfqpp animate__animated animate__bounceIn" *ngIf="whichimgpp == true">
          <div class="chaneimgfmt" >
          <button class="imgsetbtm" style="padding: 10px; height: 35px;" mat-button (click)="gtimgQuality('1')">1</button>
          <button class="imgsetbtm" style="padding: 10px; height: 35px;" mat-button (click)="gtimgQuality('2')">2</button>
          <button class="imgsetbtm" style="padding: 10px; height: 35px;" mat-button (click)="gtimgQuality('4')">4</button>
          <button class="imgsetbtm" style="padding: 10px; height: 35px;" mat-button (click)="gtimgQuality('8')">8</button>
          <button class="imgsetbtm" style="padding: 10px; height: 35px;" mat-button (click)="gtimgQuality('16')">16</button>
          <button class="imgsetbtm" style="padding: 10px; height: 35px;" mat-button (click)="gtimgQuality('20')">20</button>
        </div>
      </div>
    <h2 style="width: 100%; text-align:center; margin: 0px; color:#818cc9; text-shadow: -2px 4px 5px rgba(129, 140, 201, 0.69);" *ngIf="imgprev == true">Image Preview</h2>
   <div style="width:fit-content; height:fit-content; display: flex; flex-direction: row; gap: 15px;">
    <button title="Download the image" *ngIf="imgprev == true" mat-raised-button color="primary" (click)="downloadimg()" style="height: 35px; min-width: fit-content;
    padding: 10px;"> 
      <svg width="24px" height="24px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="white"><path d="M6 18L18 18" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 6V14M12 14L15.5 10.5M12 14L8.5 10.5" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 20.4V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4Z" stroke="white" stroke-width="1.5"></path></svg></button>
      <button title="Clear the preview" *ngIf="imgprev == true" mat-raised-button color="primary" (click)="clearprev()">clear</button>
   </div>
    <img style="height: auto; width: 85%; border-radius: 10px;-webkit-user-drag: none;" [hidden]="imgprev == false" id="preview" [src]="imgurls" alt="Captured Image Preview" loading="lazy">
  </div>

</section>
